<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام التقارير العسكرية الذكي</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');

:root{
--primary-blue:#00d4ff;
--card-bg:rgba(20,20,20,.85);
--border-color:rgba(0,212,255,.2);
--text-gray:#b0b0b0;
}

::selection{background:#00d4ff;color:#0a0a0a}

body{
margin:0;
font-family:'Cairo',sans-serif;
background:radial-gradient(circle,#1a1a1a,#050505);
color:#fff;
min-height:100vh;
overflow:hidden;
}

.bg-logos{
position:fixed;
inset:0;
pointer-events:none;
z-index:0;
}
.bg-logos img{
position:absolute;
width:220px;
opacity:.12;
animation:float 25s ease-in-out infinite;
}
.logo1{top:8%;left:5%}
.logo2{bottom:8%;right:5%}

@keyframes float{
0%{transform:translateY(0)}
50%{transform:translateY(-40px)}
100%{transform:translateY(0)}
}

.container{
position:relative;
z-index:1;
width:90%;
max-width:450px;
margin:5vh auto;
background:var(--card-bg);
backdrop-filter:blur(15px);
border:1px solid var(--border-color);
border-radius:20px;
padding:35px;
}

h2{text-align:center;color:var(--primary-blue)}

.menu-card{
background:rgba(255,255,255,.03);
border:1px solid rgba(255,255,255,.05);
padding:18px;
border-radius:15px;
cursor:pointer;
margin-bottom:15px;
}

.form-group{margin-bottom:18px}
label{color:var(--text-gray);font-size:14px}

input,select,textarea{
width:100%;
padding:12px;
background:rgba(255,255,255,.05);
border:1px solid rgba(255,255,255,.1);
border-radius:10px;
color:#fff;
font-family:'Cairo';
}

.btn-copy{
width:100%;
padding:15px;
background:linear-gradient(135deg,#00829d,#00d4ff);
border:none;
border-radius:10px;
color:#fff;
font-size:16px;
font-weight:700;
cursor:pointer;
}

.back-link{
margin-top:15px;
text-align:center;
cursor:pointer;
color:var(--text-gray);
}

#form-section{display:none}
</style>
</head>

<body>

<div class="bg-logos">
<img src="logo1.gif" class="logo1">
<img src="logo2.gif" class="logo2">
</div>

<div class="container">

<div id="menu-section">
<h2>بوليتو - التقارير</h2>
<div class="menu-card" onclick="openForm('supervision')">تقارير الإشراف</div>
<div class="menu-card" onclick="openForm('zone')">تقارير ضابط منطقة</div>
<div class="menu-card" onclick="openForm('courses')">تقارير الدورات</div>
</div>

<div id="form-section">
<h2 id="titleText"></h2>

<div class="form-group">
<label>التوجيه</label>
<input id="taskName">
</div>

<div class="form-group">
<label>الموقع</label>
<input id="location">
</div>

<div class="form-group">
<label>الرتبة</label>
<select id="rank"></select>
</div>

<div class="form-group" id="unitGroup">
<label id="unitLabel"></label>
<textarea id="unit"></textarea>
</div>

<div class="form-group">
<label>الرقم العسكري</label>
<input id="militaryID">
</div>

<button class="btn-copy" onclick="copyReport()">نسخ التقرير</button>
<div class="back-link" onclick="goBack()">رجوع</div>
</div>

</div>

<script>
let currentMode="";

const taskMap={
"سهم":"ساندي + بوليتو",
"درع":"ساندي + بوليتو",
"جنوب":"ساندي",
"غرب":"بوليتو",
"ساهر 1":"جيم + لام",
"ساهر 2":"جيم + لام",
"ساهر 3":"دال",
"ساهر 4":"دال",
"رصد":"جيم + لام + دال",
"سيف":"جيم + لام + دال"
};

const ranks={
supervision:["عميد ركن","عقيد ركن","مقدم ركن","رائد","نقيب","ملازم اول","ملازم"],
zone:["رئيس رقباء","رقيب اول","رقيب"],
courses:["عميد ركن","عقيد ركن","مقدم ركن","رائد","نقيب","ملازم اول","ملازم","رئيس رقباء","رقيب اول","رقيب"]
};

const fixedUnits="الامن العام + امن الطرق + المهام الخاصة";

const el=id=>document.getElementById(id);

function openForm(type){
currentMode=type;
el("menu-section").style.display="none";
el("form-section").style.display="block";
el("taskName").value="";
el("location").value="";

el("unitGroup").style.display= type==="courses" ? "none" : "block";
el("unit").readOnly= type==="supervision";
el("unit").value= type==="supervision" ? fixedUnits : "";

el("titleText").innerText=
type==="supervision"?"تقرير الإشراف":
type==="zone"?"تقرير ضابط منطقة":"تقرير الدورات";

el("unitLabel").innerText=
type==="supervision"?"الجهات الأمنية المتواجدة":"الوحدات التابعة لك";

updateRanks(ranks[type]);
}

function updateRanks(arr){
el("rank").innerHTML="<option disabled selected>اختر الرتبة</option>";
arr.forEach(r=>el("rank").innerHTML+=`<option>${r}</option>`);
}

el("taskName").addEventListener("input",()=>{
if(currentMode==="supervision"){
el("location").value=taskMap[el("taskName").value.trim()]||"";
}
});

function goBack(){
el("menu-section").style.display="block";
el("form-section").style.display="none";
}

function saudiTime(){
return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Riyadh"}));
}

function fmt(t){
let h=t.getHours(),m=String(t.getMinutes()).padStart(2,"0");
let p=h>=12?"م":"ص"; h=h%12||12;
return `${h}:${m} ${p}`;
}

function copyReport(){
const now=saudiTime();
const before=new Date(now-3600000);

const report=
`تم استلام مهام (${el("taskName").value||"..."}) من ${fmt(before)} إلى ${fmt(now)}\n\n`+
`الموقع : ${el("location").value||"..."}\n\n`+
(currentMode!=="courses"?`${el("unitLabel").innerText} :\n${el("unit").value}\n\n`:"")+
`تم رفع التقرير من قبل (${el("rank").value||"..."}) : <@${el("militaryID").value||"0000"}>`;

navigator.clipboard.writeText(report);
alert("تم نسخ التقرير ✅");
}
</script>

</body>
</html>
