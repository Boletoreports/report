<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>نظام التقارير العسكرية الذكي</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');

:root {
  --primary-blue: #00d4ff;
  --dark-bg: #0a0a0a;
  --card-bg: rgba(20,20,20,.8);
  --border-color: rgba(0,212,255,.2);
  --text-gray: #b0b0b0;
}

body {
  margin: 0;
  font-family: 'Cairo', sans-serif;
  background: radial-gradient(circle,#1a1a1a,#050505);
  color: #fff;
  min-height: 100vh;
  overflow-y: auto; /* السماح بالتمرير */
  padding: 20px 0;
}

/* خلفية متحركة لشعارين */
body::before, body::after {
  content: "";
  position: fixed;
  background-repeat: no-repeat;
  background-size: contain;
  opacity: 0.15;
  pointer-events: none;
  z-index: 0;
  animation: floatAnim 15s ease-in-out infinite alternate;
}

body::before {
  top: 10px;
  left: 10px;
  width: 100px;
  height: 100px;
  background-image: url('logo1.gif');
}

body::after {
  bottom: 10px;
  right: 10px;
  width: 120px;
  height: 120px;
  background-image: url('logo2.gif');
  animation-delay: 7.5s;
}

@keyframes floatAnim {
  0% { transform: translateY(0); }
  100% { transform: translateY(15px); }
}

.container {
  width: 90%;
  max-width: 450px;
  background: var(--card-bg);
  backdrop-filter: blur(15px);
  border: 1px solid var(--border-color);
  border-radius: 20px;
  padding: 35px;
  box-shadow: 0 20px 50px rgba(0,0,0,.5);
  margin: 0 auto; /* للتمركز */
  position: relative;
  z-index: 1; /* فوق الخلفية */
}

h2 {
  text-align: center;
  color: var(--primary-blue);
  margin-bottom: 30px;
}

.main-menu {
  display: grid;
  gap: 15px;
}

.menu-card {
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.05);
  padding: 20px;
  border-radius: 15px;
  cursor: pointer;
  display: flex;
  gap: 15px;
  align-items: center;
  transition: .3s;
  color: #fff;
}

.menu-card:hover {
  background: rgba(0,212,255,.08);
  border-color: var(--primary-blue);
  transform: translateX(-5px);
}

.menu-card i {
  color: var(--primary-blue);
  font-size: 22px;
}

.form-group {
  margin-bottom: 20px;
}

label {
  display: block;
  margin-bottom: 8px;
  font-size: 14px;
  color: var(--text-gray);
  font-weight: 600;
}

input, select, textarea {
  width: 100%;
  padding: 12px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.1);
  border-radius: 10px;
  color: #fff;
  font-family: 'Cairo';
}

select {
  color: black !important; /* لون نص الرتبة أسود */
}

.time-input-group {
  display: flex;
  align-items: center;
  gap: 8px;
  direction: ltr;
}

.btn-copy {
  width: 100%;
  padding: 15px;
  background: linear-gradient(135deg,#00829d,#00d4ff);
  border: none;
  border-radius: 10px;
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  margin-top: 20px;
}

.back-link {
  margin-top: 30px;
  text-align: center;
  font-size: 14px;
  cursor: pointer;
  color: var(--text-gray);
}

#form-section { display: none; }

footer {
  margin-top: 30px;
  text-align: center;
  font-size: 12px;
  color: var(--text-gray);
  position: relative;
  z-index: 1;
  padding-bottom: 10px;
}
</style>
</head>

<body>

<div class="container">

  <div id="menu-section">
    <h2><i class="fas fa-shield-alt"></i> بوليتو - التقارير</h2>
    <div class="main-menu">
      <div class="menu-card" onclick="openForm('supervision')">
        <i class="fas fa-user-shield"></i>
        <strong>تقارير الإشراف</strong>
      </div>
      <div class="menu-card" onclick="openForm('zone')">
        <i class="fas fa-map-marker-alt"></i>
        <strong>تقارير ضابط منطقة</strong>
      </div>
      <div class="menu-card" onclick="openForm('courses')">
        <i class="fas fa-graduation-cap"></i>
        <strong>تقارير الدورات</strong>
      </div>
    </div>
  </div>

  <div id="form-section">
    <h2 id="title-text">تقديم التقرير</h2>

    <div class="form-group" id="course-dropdown" style="display:none">
      <label>اسم الدورة</label>
      <select id="courseName" onchange="handleCourseChange()">
        <option disabled selected>اختر الدورة</option>
        <option>شرطة عسكرية</option>
        <option>الشؤون الإدارية</option>
        <option>دورة نقل سجون</option>
        <option>S.W.A.T</option>
      </select>
    </div>

    <div class="form-group">
      <label>التوجيه</label>
      <input type="text" id="taskName" oninput="handleTaskInput()" autocomplete="off" />
    </div>

    <div class="form-group">
      <label>وقت المباشرة</label>
      <div class="time-input-group">
        <select id="pFrom"><option>م</option><option>ص</option></select>
        <select id="hFrom"></select> :
        <select id="mFrom"></select>
      </div>

      <div class="time-input-group" style="margin-top:8px">
        <select id="pTo"><option>م</option><option>ص</option></select>
        <select id="hTo"></select> :
        <select id="mTo"></select>
      </div>
    </div>

    <div class="form-group">
      <label>الموقع</label>
      <input type="text" id="location" />
    </div>

    <div class="form-group">
      <label>الرتبة</label>
      <select id="rank"></select>
    </div>

    <div class="form-group" id="unit-group">
      <label id="unit-label">الوحدات التابعة لك</label>
      <textarea id="unit" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label>الكوبي ايدي</label>
      <input type="text" id="militaryID" />
    </div>

    <button class="btn-copy" onclick="copyReport()">نسخ التقرير النهائي</button>

    <div class="back-link" onclick="goBack()">الرجوع إلى القائمة الرئيسية</div>

  </div>

</div>

<footer>
  حقوق الملكية © قطاع الأمن العام بمقاطعة بوليتو
</footer>

<script>
// تسهيل الوصول لعناصر DOM
const el = (id) => document.getElementById(id);

let currentMode = "";
const fixedUnits = "الامــن الــعـام + امـن الـطـرق + المهام والواجبات الخاصه";

const supervisionRanks = ["عميد ركن","عقيد ركن","مقدم ركن","رائد","نقيب","ملازم اول","ملازم"];
const zoneRanks = ["رئيس رقباء","رقيب اول","رقيب"];
const allRanks = [...supervisionRanks, ...zoneRanks];

// تعيين خيارات الوقت (الساعات والدقائق)
function initTime() {
  ["hFrom","hTo"].forEach(id => {
    const elSelect = el(id);
    elSelect.innerHTML = "";
    for(let i = 1; i <= 12; i++) {
      const val = i < 10 ? "0" + i : i;
      elSelect.innerHTML += `<option>${val}</option>`;
    }
  });

  ["mFrom","mTo"].forEach(id => {
    const elSelect = el(id);
    elSelect.innerHTML = "";
    for(let i = 0; i < 60; i += 5) {
      const val = i < 10 ? "0" + i : i;
      elSelect.innerHTML += `<option>${val}</option>`;
    }
  });
}

// تحديث قائمة الرتب
function updateRankOptions(ranks) {
  const rankSelect = el("rank");
  rankSelect.innerHTML = "<option disabled selected>اختر الرتبة</option>";
  ranks.forEach(r => {
    rankSelect.innerHTML += `<option>${r}</option>`;
  });
}

// فتح الفورم حسب النوع
function openForm(type) {
  currentMode = type;
  el("menu-section").style.display = "none";
  el("form-section").style.display = "block";
  initTime();

  const unit = el("unit");
  unit.readOnly = false;
  unit.value = "";

  if(type === "supervision") {
    el("title-text").innerText = "تقرير الإشراف";
    el("course-dropdown").style.display = "none";
    el("unit-group").style.display = "block";
    el("unit-label").innerText = "الـجــهــات الامـلـنـيــة المـــتــواجــده";
    updateRankOptions(supervisionRanks);
    unit.value = fixedUnits;
    unit.readOnly = true;
  } else if(type === "zone") {
    el("title-text").innerText = "تقرير ضابط منطقة";
    el("course-dropdown").style.display = "none";
    el("unit-group").style.display = "block";
    el("unit-label").innerText = "الوحدات التابعة لك";
    updateRankOptions(zoneRanks);
  } else if(type === "courses") {
    el("title-text").innerText = "تقرير الدورات";
    el("course-dropdown").style.display = "block";
    el("unit-group").style.display = "none";
    updateRankOptions(allRanks);
  }
}

// العودة للقائمة الرئيسية
function goBack() {
  el("menu-section").style.display = "block";
  el("form-section").style.display = "none";
}

// الخريطة الخاصة بالتوجيهات والمواقع
const taskMap = {
  "سهم 1": "ساندي + بوليتو",
  "سهم 2": "ساندي + بوليتو",
  "سهم 3": "ساندي + بوليتو",
  "سهم 4": "ساندي + بوليتو",
  "سهم 5": "ساندي + بوليتو",
  "درع 1": "ساندي + بوليتو",
  "درع 2": "ساندي + بوليتو",
  "درع 3": "ساندي + بوليتو",
  "درع 4": "ساندي + بوليتو",
  "درع 5": "ساندي + بوليتو",
  "جنوب 1": "ساندي",
  "جنوب 2": "ساندي",
  "جنوب 3": "ساندي",
  "جنوب 4": "ساندي",
  "غرب 1": "بوليتو",
  "غرب 2": "بوليتو",
  "غرب 3": "بوليتو",
  "غرب 4": "بوليتو"
};

// تحديث الموقع تلقائيًا حسب التوجيه مع إضافة النص وليس استبداله
function handleTaskInput() {
  if(currentMode === "supervision") {
    const taskInput = el("taskName").value.trim();
    let matchedLocations = [];

    for(const key in taskMap) {
      if(taskInput.includes(key)) {
        matchedLocations.push(taskMap[key]);
      }
    }

    if(matchedLocations.length > 0) {
      let currentLocation = el("location").value;
      matchedLocations.forEach(locText => {
        if(!currentLocation.includes(locText)) {
          if(currentLocation.length > 0 && !currentLocation.endsWith(" + ")) {
            currentLocation += " + ";
          }
          currentLocation += locText;
        }
      });
      el("location").value = currentLocation;
    }
  }
}

// تحويل الوقت 12 ساعة إلى رقم 24 لتسهيل الحساب
function to24Hour(h, p) {
  let hour = parseInt(h, 10);
  if(p === "م" && hour !== 12) hour += 12;
  if(p === "ص" && hour === 12) hour = 0;
  return hour;
}

// تحويل رقم 24 إلى 12 ساعة مع AM/PM
function to12Hour(hour) {
  let p = "ص";
  let h = hour;
  if(hour === 0) {
    h = 12;
  } else if(hour >= 12) {
    p = "م";
    if(hour > 12) h = hour - 12;
  }
  return {h: h < 10 ? "0"+h : h.toString(), p};
}

// نسخ التقرير مع حساب الوقت تلقائيًا بمدة ساعة
function copyReport() {
  const task = el("taskName").value.trim() || "...";

  // نحصل على وقت البداية من الفورم (12 ساعة)
  let hFrom = el("hFrom").value;
  let mFrom = el("mFrom").value;
  let pFrom = el("pFrom").value;

  // نحول البداية إلى 24 ساعة
  let startHour24 = to24Hour(hFrom, pFrom);
  let startMinute = parseInt(mFrom, 10);

  // نحسب نهاية التقرير بعد ساعة
  let endHour24 = startHour24 + 1;
  let endMinute = startMinute;

  if(endHour24 >= 24) endHour24 -= 24; // ضبط الوقت لو تعدى 24

  // نحول الوقت إلى 12 ساعة لعرضه
  let startTime = to12Hour(startHour24);
  let endTime = to12Hour(endHour24);

  // الموقع
  const loc = el("location").value.trim() || "...";

  // الرتبة
  const rank = el("rank").value || "...";

  // الكوبي ايدي
  const id = el("militaryID").value || "0000";

  // الوحدات (لنوع التقارير)
  let unitText = "";
  if(currentMode === "courses") {
    unitText = "";
  } else if(currentMode === "supervision") {
    unitText = fixedUnits;
  } else {
    unitText = el("unit").value.trim() || "";
  }

  // صيغة التقرير المطلوبة:
  let report = `** \`تـم اسـتـلام مـهـام ( ${task} )  من السـاعة ${startTime.h}:${mFrom} ${startTime.p} اٍلـى الـساعة ${endTime.h}:${mFrom} ${endTime.p}\`**\n\n`;
  report += `** \`الـمـنـطـقـة : ${loc} \`** \n\n`;
  if(currentMode === "supervision") {
    report += `** \`الـجــهــات الامــنـيــة المـــتــواجــده : \`** \n\n`;
    report += `** \`${unitText}\`** \n\n`;
  } else if(currentMode !== "courses") {
    report += `** \`الوحدات التابعة لك : \`** \n\n`;
    report += `** \`${unitText}\`** \n\n`;
  }
  report += `** \`تم رفـــع التـقـريـر من قبــل ( ${rank} ) :\`** @${id}`;

  navigator.clipboard.writeText(report);
  alert("تم نسخ التقرير ✅");
}
</script>

</body>
</html>
