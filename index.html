<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام التقارير العسكرية الذكي</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --blue:#00d4ff;
  --bg:#050505;
  --card:rgba(20,20,20,.85);
  --gray:#b0b0b0;
}
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:radial-gradient(circle,#1a1a1a,var(--bg));
  color:#fff;
  display:flex;
  justify-content:center;
  min-height:100vh;
}
.container{
  width:90%;
  max-width:520px;
  background:var(--card);
  border-radius:20px;
  padding:30px;
  margin-top:20px;
}
h2{ text-align:center;color:var(--blue); }
.main-menu{ display:grid; gap:15px; }
.menu-card{
  background:rgba(255,255,255,.05);
  padding:18px;
  border-radius:14px;
  cursor:pointer;
  display:flex;
  gap:12px;
  align-items:center;
}
.menu-card i{ color:var(--blue); }

.form-group{ margin-bottom:18px; }
label{ font-size:14px;color:var(--gray);display:block;margin-bottom:6px;font-weight:600; }
input,select,textarea{
  width:100%;
  padding:12px;
  border-radius:10px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.15);
  color:#fff;
  font-family:'Cairo';
}
textarea{ height:90px;resize:vertical; }
select{ color:#000; }

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:10px;
  background:linear-gradient(135deg,#00829d,var(--blue));
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
.back{ text-align:center;margin-top:12px;cursor:pointer;color:#aaa; }
#form-section{ display:none; }
.footer{ text-align:center;font-size:12px;color:#aaa;margin-top:15px; }
</style>
</head>

<body>
<div class="container">

<!-- القائمة -->
<div id="menu-section">
<h2>بوليتو - التقارير</h2>
<div class="main-menu">
  <div class="menu-card" onclick="openForm('supervision')"><i class="fas fa-user-shield"></i> تقارير الإشراف</div>
  <div class="menu-card" onclick="openForm('zone')"><i class="fas fa-map-marker-alt"></i> تقارير ضابط منطقة</div>
  <div class="menu-card" onclick="openForm('courses')"><i class="fas fa-graduation-cap"></i> تقارير الدورات</div>
  <div class="menu-card" onclick="openOperations()"><i class="fas fa-clipboard-list"></i> تقارير العمليات</div>
</div>
</div>

<!-- النموذج -->
<div id="form-section">
<h2 id="title"></h2>

<div class="form-group">
<label>التوجيه</label>
<input id="task" list="taskList">
<datalist id="taskList"></datalist>
</div>

<div class="form-group">
<label>الموقع</label>
<input id="location">
</div>

<div class="form-group">
<label>الرتبة</label>
<select id="rank"></select>
</div>

<div class="form-group">
<label>كوبي ايدي العسكري</label>
<input id="copyID">
</div>

<div class="form-group" id="unitsGroup" style="display:none">
<label>الوحدات التابعة</label>
<textarea id="units"></textarea>
</div>

<div class="form-group" id="courseGroup" style="display:none">
<label>اسم الدورة</label>
<input id="courseName">
</div>

<div class="form-group">
<label>التقرير نازل مبكر؟</label>
<select id="early" onchange="toggleEarly()">
  <option value="no">لا</option>
  <option value="yes">نعم</option>
</select>
</div>

<div class="form-group" id="earlyGroup" style="display:none">
<label>سبب التبكير</label>
<select id="earlyReason">
  <option>ريستارت</option>
  <option>صيانة</option>
  <option>إعادة اصطفاف</option>
</select>
</div>

<button onclick="copyReport()">نسخ التقرير</button>
<div class="back" onclick="goBack()">رجوع</div>
</div>

<div class="footer">© قطاع الأمن العام - بوليتو</div>
</div>

<script>
function el(id){return document.getElementById(id);}

const fixedUnits="الامــن الــعـام + امـن الـطـرق + المهام والواجبات الخاصه";

const supervisionRanks=["عميد ركن","عقيد ركن","مقدم ركن","رائد","نقيب","ملازم اول","ملازم"];
const zoneRanks=["رئيس رقباء","رقيب اول","رقيب"];
const courseRanks=["جندي","جندي اول","عريف","وكيل رقيب"];

let mode="";

function openForm(m){
  mode=m;
  el("menu-section").style.display="none";
  el("form-section").style.display="block";

  el("unitsGroup").style.display = m==="zone" ? "block":"none";
  el("courseGroup").style.display = m==="courses" ? "block":"none";

  el("title").textContent =
    m==="courses" ? "تقارير الدورات" :
    m==="zone" ? "تقارير ضابط منطقة" :
    "تقارير الإشراف";

  const r=el("rank");
  r.innerHTML='<option disabled selected>اختر الرتبة</option>';
  (m==="courses"?courseRanks:m==="zone"?zoneRanks:supervisionRanks)
    .forEach(x=>r.innerHTML+=`<option>${x}</option>`);
}

function goBack(){
  el("menu-section").style.display="block";
  el("form-section").style.display="none";
}

function toggleEarly(){
  el("earlyGroup").style.display = el("early").value==="yes"?"block":"none";
}

function saTime(){
  let d=new Date();
  let utc=d.getTime()+d.getTimezoneOffset()*60000;
  return new Date(utc+3*3600000);
}
function format(t){
  let h=t.getHours()%12||12;
  let m=t.getMinutes();
  let p=t.getHours()>=12?"م":"ص";
  return `${h<10?"0"+h:h}:${m<10?"0"+m:m} ${p}`;
}

function copyReport(){
  let task=el("task").value||"...";
  let loc=el("location").value||"...";
  let rank=el("rank").value||"...";
  let id=el("copyID").value||"1358333213965156392";
  let early=el("early").value==="yes"?el("earlyReason").value:null;

  let end=saTime();
  let start=new Date(end.getTime()-60*60000);

  let report=
`** \`تـم اسـتـلام مـهـام ( ${task} ) من الساعة ${format(start)} إلى الساعة ${format(end)}\` **

** \`الـمـنـطـقـة : ${loc}\` **

** \`الـجــهــات الامــنـيــة المــتــواجــده :\` **

** \`${fixedUnits}\` **

** \`تم رفـــع التـقـريـر من قبــل ( ${rank} ) :\` ** <@${id}>`;

  if(early) report+=`\n\n** \`سبب التبكير : ${early}\` **`;

  navigator.clipboard.writeText(report);
  alert("تم نسخ التقرير ✅");
}

function openOperations(){
  window.open("https://1boletop.netlify.app/","_blank");
}
</script>
</body>
</html>
